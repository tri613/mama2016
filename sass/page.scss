$peach: #ffb285, #ff9aac;
$delay-start-time: 2s;
$basic-duration: 1s;
$cubic: cubic-bezier(0.65, 0.05, 0.36, 1);

%strip-bg {
	background-color: hsl(2, 57%, 40%);
background-image: repeating-linear-gradient(transparent, transparent 50px, rgba(0,0,0,.4) 50px, rgba(0,0,0,.4) 53px, transparent 53px, transparent 63px, rgba(0,0,0,.4) 63px, rgba(0,0,0,.4) 66px, transparent 66px, transparent 116px, rgba(0,0,0,.5) 116px, rgba(0,0,0,.5) 166px, rgba(255,255,255,.2) 166px, rgba(255,255,255,.2) 169px, rgba(0,0,0,.5) 169px, rgba(0,0,0,.5) 179px, rgba(255,255,255,.2) 179px, rgba(255,255,255,.2) 182px, rgba(0,0,0,.5) 182px, rgba(0,0,0,.5) 232px, transparent 232px),
repeating-linear-gradient(270deg, transparent, transparent 50px, rgba(0,0,0,.4) 50px, rgba(0,0,0,.4) 53px, transparent 53px, transparent 63px, rgba(0,0,0,.4) 63px, rgba(0,0,0,.4) 66px, transparent 66px, transparent 116px, rgba(0,0,0,.5) 116px, rgba(0,0,0,.5) 166px, rgba(255,255,255,.2) 166px, rgba(255,255,255,.2) 169px, rgba(0,0,0,.5) 169px, rgba(0,0,0,.5) 179px, rgba(255,255,255,.2) 179px, rgba(255,255,255,.2) 182px, rgba(0,0,0,.5) 182px, rgba(0,0,0,.5) 232px, transparent 232px),
repeating-linear-gradient(125deg, transparent, transparent 2px, rgba(0,0,0,.2) 2px, rgba(0,0,0,.2) 3px, transparent 3px, transparent 5px, rgba(0,0,0,.2) 5px);
}

%star-bg {
	background:
	linear-gradient(324deg, #232927 4%,   transparent 4%) -70px 43px,
	linear-gradient( 36deg, #232927 4%,   transparent 4%) 30px 43px,
	linear-gradient( 72deg, #e3d7bf 8.5%, transparent 8.5%) 30px 43px,
	linear-gradient(288deg, #e3d7bf 8.5%, transparent 8.5%) -70px 43px,
	linear-gradient(216deg, #e3d7bf 7.5%, transparent 7.5%) -70px 23px,
	linear-gradient(144deg, #e3d7bf 7.5%, transparent 7.5%) 30px 23px,

	linear-gradient(324deg, #232927 4%,   transparent 4%) -20px 93px,
	linear-gradient( 36deg, #232927 4%,   transparent 4%) 80px 93px,
	linear-gradient( 72deg, #e3d7bf 8.5%, transparent 8.5%) 80px 93px,
	linear-gradient(288deg, #e3d7bf 8.5%, transparent 8.5%) -20px 93px,
	linear-gradient(216deg, #e3d7bf 7.5%, transparent 7.5%) -20px 73px,
	linear-gradient(144deg, #e3d7bf 7.5%, transparent 7.5%) 80px 73px;
	background-color: #232927;
	background-size: 100px 100px;
}

@mixin absolute-center($transforms: '', $position: relative) {
	position: $position;
	top: 50%; left: 50%;
	transform: translate(-50%, -50%) #{$transforms};
}

@mixin change-background ($deg: 134, $colors...) {
	background: linear-gradient(#{$deg}deg, $colors);
	background-size: 1200% 1200%;
	animation: changeColor 20s ease infinite;
}

$heart-color: red;

.page-wrapper {
	position: absolute;
	width: 100%;
	height: 100%;
	top: 0; left: 0;
	color: #FFF;
	font-family: Raleway, 微軟正黑體, "Microsoft JhengHei", Arial, Helvetica, sans-serif;
	
	#top {
		// @include change-background(298, $peach);
		@include change-background(280, #28a0ff, #c8ff51, #ffd951, #ff5751, #ff5188, #616cde);
		height: 100vh;

		.container {
		  position: relative;
		  top: -100%;
		  left: 50%;
		  width: 200px;
		  height: 200px;
		  margin-left: -100px;
		  perspective: 1000px;
		  transform: translateY(-100%);
		  animation: dropCube $basic-duration $cubic forwards $delay-start-time; 
			#cube {
				width: 100%;
				height: 100%;
				position: absolute;
				transform-style: preserve-3d;
				// animation: rotateCube $basic-duration forwards $delay-start-time; 
				figure {
					margin: 0;
					width: 100%;
					height: 100%;
					display: block;
					position: absolute;
					transition: all 0.5s;
					box-sizing: border-box;
					background-color:#FFF;
					opacity: 0.8;
					// @extend %star-bg;
				}
				.front  { transform: rotateY( 0deg ) translateZ( 100px ); z-index: 3;}
				.back   { transform: translateZ( -100px ); }
			 	.right  { transform: rotateY(  90deg ) translateZ( 100px ); }
			 	.left   { transform: rotateY( -90deg ) translateZ( 100px ); z-index: 3;}
			 	.top    { transform: rotateX(  90deg ) translateZ( 100px ); z-index:1; animation: openTop $basic-duration forwards $delay-start-time+1; }
			 	.bottom { transform: rotateX( -90deg ) translateZ( 100px ); }
				
				#heart {
					width: 100%;
				    height: 100%;
				    position: absolute;
				    z-index: 2;
				    top: 0;
				    transform: rotateY(0deg);
				    animation: showHeart $basic-duration forwards $delay-start-time+2, heartbeat 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) $delay-start-time+3 infinite alternate;
					
					* { position: absolute; }
					.heart-top {
						height: 25%;
						width: 50.25%;
						top: 0;
						overflow: hidden;
						&:after {
							top: 0;
							content: "";
							position: absolute; 
							height: 200%;
							width: 104%;
							background: $heart-color;
							border-top-left-radius: 70% 80%;
							border-top-right-radius: 80% 80%;
							border-bottom-right-radius: 50% 50%;
							border-bottom-left-radius: 50% 50%;
						}
						&.lft, &.lft:after {left: 0};
						&.rgt {right: 0};
						&.rgt:after {
							right: 0;
							border-top-left-radius: 80% 80%;
							border-top-right-radius: 70% 80%;
						}
					}

					.heart-bot {
						height: 75.5%;
						width: 50.25%;
						bottom: 0;
						overflow: hidden;
						&:after {
							position: absolute; 
							content: "";
							height: 95%;
							width: 160%;
							background: $heart-color;
							top: 0;
							border-bottom-left-radius: 100% 100%;
						}
						&.lft, &.lft:after {left: 0};
						&.rgt {right: 0};
						&.rgt:after {
							right: 0;
							border-bottom-left-radius: 0;
							border-bottom-right-radius: 100% 100%;
						}
					}
				}
			}
		}
	}
}


// keyframes

//opening animation
@keyframes dropCube {
	100% {top: 85%;}
}
@keyframes scaleCube {
	100% {transform: translate(-50%, -50%) scale(1)};
}
@keyframes rotateCube {
	100% {transform: rotateY(390deg);}
}
@keyframes openTop {
	100% {
		transform-origin: top center;
		transform: rotateX(180deg) translateZ(100px);
	}
}
@keyframes showHeart {
	100% { top: -130%;}
}
@keyframes heartbeat {
	50% {
		transform: scale(0.8);
	}
	100% {
		transform: scale(0.9);
	}
}
//bg
@keyframes changeColor { 
    0%{background-position:0% 50%}
    50%{background-position:100% 50%}
    100%{background-position:0% 50%}
}
